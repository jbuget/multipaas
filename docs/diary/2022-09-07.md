# 2022-09-07 - Le registre

Dans Fastify, il n'est (toujours) pas possible d'ajouter des routes ou des plugins à la volée (cf. [issue #149](https://github.com/fastify/help/issues/149)).

Dans mon cas, ce n'est pas si grave. 
Si une app se fait proxifiée une fois, si jamais elle doit être réveillée, au moins le routage sera prêt.

Mais il me vient une réflexion : si on ne peut pas proxifier des routes/apps à la volée, comment manager de nouvelles apps, pas présentes au démarrage ?

Pistes :
- Peut-être que `@fastify/http-proxy`, de par son comportement basé sur les prefix de requêtes, permet de le faire
- Peut-être que je vais vraiment devoir faire le proxy à la main (et bye-bye la semi-gestion des WebSockets)

Mais du coup, quite à faire un simple proxy_pass, pourquoi s'embêter avec Nginx 🤔

> ⚠️ Quid des requêtes de fichier / multipart / stream ?

Et si le plus simple était de passer directement par [`fastify-reply-from`](https://github.com/fastify/fastify-reply-from) ? 
Comme ça plus de besoin de Nginx.
Et je récupère directement le app_name (via tldts).
Testons.

